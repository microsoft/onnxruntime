parameters:
- name: DockerImageTag
  type: string
- name: BuildConfig
  type: string

steps:

# Entry point for all ORTModule tests
# The onnxruntime folder is deleted in the build directory
# to enforce use of the onnxruntime wheel
# Uninstall orttraining requirements.txt and install ortmodule requirements.txt before running tests.
- bash: tools/ci_build/github/azure-pipelines/templates/orttraining-linux-gpu-ortmodule-test-ci-pipeline.sh $(Build.SourcesDirectory) $(Build.BinariesDirectory) ${{ parameters.BuildConfig }} ${{ parameters.DockerImageTag }} $(Build.Reason)
  displayName: 'Run orttraining_ortmodule_tests.py'
  condition: succeededOrFailed()

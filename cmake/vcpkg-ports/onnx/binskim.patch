diff --git a/CMakeLists.txt b/CMakeLists.txt
index 4a7df7d71..8462e3293 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -52,6 +52,7 @@ option(ONNX_USE_LITE_PROTO "Use lite protobuf instead of full." OFF)
 option(ONNX_DISABLE_EXCEPTIONS "Disable exception handling." OFF)
 option(ONNX_DISABLE_STATIC_REGISTRATION "Disable static registration for ONNX operator schemas." OFF)
 option(ONNX_USE_UNITY_BUILD "Enable Unity (Jumbo) build for" OFF)
+option(ONNX_MINIMAL_BUILD "Build only essential ONNX components" OFF)
 if(WIN32)
   option(ONNX_USE_MSVC_STATIC_RUNTIME "Build with MSVC static runtime" OFF)
 endif()
@@ -399,14 +400,28 @@ relative_protobuf_generate_cpp(ONNX_PROTO_SRCS
 
 add_library(onnx_proto_object OBJECT ${ONNX_PROTO_SRCS})
 
-file(GLOB_RECURSE __tmp_srcs "${ONNX_ROOT}/onnx/*.h" "${ONNX_ROOT}/onnx/*.cc")
-file(GLOB_RECURSE onnx_gtests_src "${ONNX_ROOT}/onnx/test/cpp/*.h"
-    "${ONNX_ROOT}/onnx/test/cpp/*.cc"
-    "${ONNX_ROOT}/onnx/backend/test/cpp/*.cc"
-    "${ONNX_ROOT}/onnx/backend/test/cpp/*.h")
-list(REMOVE_ITEM __tmp_srcs "${ONNX_ROOT}/onnx/cpp2py_export.cc")
-list(REMOVE_ITEM __tmp_srcs ${onnx_gtests_src} "${ONNX_ROOT}/onnx/test/cmake/main.cc")
-list(APPEND ONNX_SRCS ${__tmp_srcs})
+if(ONNX_MINIMAL_BUILD)
+    message(STATUS "Configuring ONNX minimal build")
+    set(ONNX_SRCS
+      "${ONNX_ROOT}/onnx/common/common.h"
+      "${ONNX_ROOT}/onnx/defs/data_type_utils.h"
+      "${ONNX_ROOT}/onnx/defs/data_type_utils.cc"
+    )
+    # Ensure ONNX_ML is treated as ON for minimal build consistency with ORT's file
+    set(ONNX_ML ON CACHE BOOL "Enable traditional ML API." FORCE)
+    # Minimal build doesn't need Python or tests
+    set(ONNX_BUILD_PYTHON OFF CACHE BOOL "Build Python binaries" FORCE)
+    set(ONNX_BUILD_TESTS OFF CACHE BOOL "Build ONNX C++ APIs Tests" FORCE)
+else()
+    file(GLOB_RECURSE __tmp_srcs "${ONNX_ROOT}/onnx/*.h" "${ONNX_ROOT}/onnx/*.cc")
+    file(GLOB_RECURSE onnx_gtests_src "${ONNX_ROOT}/onnx/test/cpp/*.h"
+        "${ONNX_ROOT}/onnx/test/cpp/*.cc"
+        "${ONNX_ROOT}/onnx/backend/test/cpp/*.cc"
+        "${ONNX_ROOT}/onnx/backend/test/cpp/*.h")
+    list(REMOVE_ITEM __tmp_srcs "${ONNX_ROOT}/onnx/cpp2py_export.cc")
+    list(REMOVE_ITEM __tmp_srcs ${onnx_gtests_src})
+    list(APPEND ONNX_SRCS ${__tmp_srcs})
+endif()
 
 set(LINKED_PROTOBUF_TARGET protobuf::libprotobuf)
 if(ONNX_USE_LITE_PROTO)
@@ -417,19 +432,7 @@ endif()
 add_onnx_global_defines(onnx_proto_object)
 target_include_directories(onnx_proto_object PUBLIC
   $<BUILD_INTERFACE:${CMAKE_CURRENT_BINARY_DIR}>)
-if(MSVC)
-  # For disabling Protobuf related warnings
-  set(protobuf_warnings
-    /wd4146 # unary minus operator applied to unsigned type,
-            # result still unsigned
-    /wd4244 # 'argument': conversion from 'google::
-            # protobuf::uint64' to 'int', possible
-            # loss of data
-    /wd4267 # Conversion from 'size_t' to 'int',
-            # possible loss of data
-    /wd4141 # 'inline': used more than once
-  )
-endif()
+
 add_library(onnx_proto)
 target_link_libraries(onnx_proto PUBLIC $<BUILD_INTERFACE:onnx_proto_object>)
 if(ONNX_ML)
diff --git a/cmake/ONNXConfig.cmake.in b/cmake/ONNXConfig.cmake.in
index aa1ef47d9..18ab278a4 100644
--- a/cmake/ONNXConfig.cmake.in
+++ b/cmake/ONNXConfig.cmake.in
@@ -4,7 +4,7 @@
 # library version information
 set(ONNX_VERSION "@ONNX_VERSION@")
 
-if(NOT @ONNX_USE_PROTOBUF_SHARED_LIBS@)
+if((NOT @ONNX_USE_PROTOBUF_SHARED_LIBS@) AND @Build_Protobuf@)
   find_package(Protobuf REQUIRED CONFIG)
 endif()
 
diff --git a/onnx/defs/nn/old.cc b/onnx/defs/nn/old.cc
index 887151217..ac2e8c463 100644
--- a/onnx/defs/nn/old.cc
+++ b/onnx/defs/nn/old.cc
@@ -4152,7 +4152,6 @@ ONNX_OPERATOR_SET_SCHEMA(
     GroupNormalization,
     18,
     OpSchema()
-        .Deprecate()
         .SetDoc(GroupNormalization_ver18_doc)
         .Attr("epsilon", "The epsilon value to use to avoid division by zero.", AttributeProto::FLOAT, 1e-5f)
         .Attr(

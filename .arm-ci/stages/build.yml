#
# SPDX-FileCopyrightText: Copyright 2025 Arm Limited and/or its affiliates <open-source-office@arm.com>
#
# SPDX-License-Identifier: MIT
#

build_release_ubuntu:
  extends:
    - .default_settings
    - .default_settings_build
    - .common_setup
  stage: build
  image: mleng--registry.eu-west-1.artifactory.aws.arm.com/kleidi-integrations/onnxrt-builder:0.0.2
  script:
    - ./build.sh --config Release --build_shared_lib --parallel --skip_tests
  artifacts:
    paths:
      - build/
    expire_in: 1h

# build_debug_ubuntu:
#   extends:
#     - .default_settings
#     - .default_settings_build
#     - .common_setup
#   stage: build
#   image: mleng--registry.eu-west-1.artifactory.aws.arm.com/kleidi-integrations/onnxrt-builder:0.0.2
#   script:
#     - ./build.sh --config Debug --build_shared_lib --parallel --skip_tests


mac_release_build:
  extends:
    - .mac_common
  stage: build
  tags:
    - mac-mini
  script:
    - ./build.sh --config Release --use_xcode --apple_sysroot macosx --build_shared_lib --parallel --skip_tests --osx_arch arm64 --apple_deploy_target 14
  artifacts:
    paths:
      - build/
    expire_in: 1h

# mac_debug_build:
#   extends:
#     - .mac_common
#   stage: build
#   tags:
#     - mac-mini
#   script:
#     - ./build.sh --config Debug --use_xcode --apple_sysroot macosx --build_shared_lib --parallel --skip_tests --osx_arch arm64 --apple_deploy_target 14
